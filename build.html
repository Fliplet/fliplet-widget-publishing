<div class="publishing-widget-container" data-com-fliplet-publishing-id="{{id}}">
    <!-- Platform Selection Screen (Initial View) -->
    <div id="platform-selection-screen" class="screen active">
        <div class="publishing-card">
            <div class="publishing-card-header">
                <h1 class="text-center">Publish Your App</h1>
                <p class="text-center text-muted">Choose the platform where you want to publish your app</p>
            </div>
            
            <div class="publishing-card-body">
                <div class="platform-cards">
                    <div class="platform-card" data-platform="ios">
                        <div class="platform-icon">üì±</div>
                        <h3>iOS App Store</h3>
                        <p class="text-muted">Publish to Apple's App Store</p>
                        <ul class="text-sm text-muted mt-3" style="list-style: none; padding: 0;">
                            <li>‚Ä¢ API Key Configuration</li>
                            <li>‚Ä¢ Certificate Management</li>
                            <li>‚Ä¢ Bundle ID Selection</li>
                            <li>‚Ä¢ Push Notifications</li>
                            <li>‚Ä¢ App Store Listing</li>
                        </ul>
                    </div>
                    
                    <div class="platform-card" data-platform="android">
                        <div class="platform-icon">ü§ñ</div>
                        <h3>Google Play Store</h3>
                        <p class="text-muted">Publish to Google Play Store</p>
                        <ul class="text-sm text-muted mt-3" style="list-style: none; padding: 0;">
                            <li>‚Ä¢ Bundle ID Configuration</li>
                            <li>‚Ä¢ Keystore Management</li>
                            <li>‚Ä¢ Push Notifications</li>
                            <li>‚Ä¢ Play Store Listing</li>
                        </ul>
                    </div>
                </div>
                
                <div id="platform-info" class="mt-4 d-none">
                    <div class="alert alert-info">
                        <div id="platform-details"></div>
                    </div>
                </div>
            </div>
            
            <div class="publishing-card-footer">
                <div></div>
                <button id="continue-btn" class="btn btn-primary btn-lg" disabled>
                    Continue with <span id="selected-platform-name"></span>
                </button>
            </div>
        </div>
        
        <div id="existing-submissions" class="publishing-card d-none">
            <div class="publishing-card-header">
                <h3>Previous Submissions</h3>
                <p class="text-muted mb-0">You have previous publishing attempts for this platform</p>
            </div>
            <div class="publishing-card-body">
                <div id="submissions-list"></div>
            </div>
        </div>
    </div>

    <!-- iOS Workflow Screens -->
    <div id="ios-api-key-screen" class="screen">
        <div class="publishing-card">
            <div class="publishing-card-header">
                <div class="step-header">
                    <button class="btn btn-secondary btn-sm" id="back-btn">‚Üê Back</button>
                    <h2>iOS API Key Configuration</h2>
                </div>
                <div class="steps">
                    <div class="step active">
                        <div class="step-circle">1</div>
                        <div class="step-label">API Key</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">2</div>
                        <div class="step-label">Bundle & Certificate</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">3</div>
                        <div class="step-label">Push Config</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">4</div>
                        <div class="step-label">App Store Listing</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">5</div>
                        <div class="step-label">Build</div>
                    </div>
                </div>
            </div>
            
            <div class="publishing-card-body">
                <div id="api-key-form">
                    <div class="form-group">
                        <label class="form-label">Select or Create API Key</label>
                        <select id="api-key-select" class="form-control">
                            <option value="">Loading API keys...</option>
                        </select>
                        <button id="create-new-api-key" class="btn btn-secondary btn-sm mt-2">Create New API Key</button>
                    </div>
                    
                    <div id="new-api-key-form" class="d-none">
                        <div class="form-group">
                            <label class="form-label">API Key Name</label>
                            <input type="text" id="api-key-name" class="form-control" placeholder="Enter API key name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Key ID</label>
                            <input type="text" id="api-key-id" class="form-control" placeholder="Enter key ID">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Issuer ID</label>
                            <input type="text" id="api-issuer-id" class="form-control" placeholder="Enter issuer ID">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Private Key (.p8 file)</label>
                            <div class="file-upload">
                                <input type="file" id="api-private-key" accept=".p8">
                                <label for="api-private-key" class="file-upload-label">Choose File</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="publishing-card-footer">
                <button id="validate-api-key" class="btn btn-secondary">Validate Key</button>
                <button id="continue-api-key" class="btn btn-primary btn-lg">Continue</button>
            </div>
        </div>
    </div>

    <!-- Additional screens will be added here -->
    <div id="loading-screen" class="screen d-none">
        <div class="publishing-card">
            <div class="publishing-card-body text-center">
                <div class="spinner-large"></div>
                <h3>Loading...</h3>
                <p class="text-muted">Please wait while we set up your publishing workflow</p>
            </div>
        </div>
    </div>

    <!-- Error Display -->
    <div id="error-container"></div>
</div>